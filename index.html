<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>던전 앤 스톤: 게임 속 바바리안으로 살아남기</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&family=MedievalSharp&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:,">
</head>
<body>

    <div id="game-container">
        <h1 id="game-title">Dungeon & Stone</h1>

        <div id="race-selection">
            <h2>종족 선택</h2>
            <p class="layer-description">게임을 시작하려면 종족을 선택하세요. 각 종족은 고유의 기본 스탯과 특성을 가집니다.</p>
            <div id="races-list"></div>
        </div>

        <div id="main-game" class="hidden">

            <aside id="status-panel">
                <h3><i class="icon-user"></i> 플레이어 상태</h3>

                <div class="status-bars">
                    <label>HP: <progress id="player-hp" max="100" value="100"></progress> <span id="player-hp-value">100/100</span></label>
                    <label>MP: <progress id="player-mp" max="100" value="100"></progress> <span id="player-mp-value">100/100</span></label>
                    <label>기력: <progress id="player-stamina" max="100" value="100"></progress> <span id="player-stamina-value">100/100</span></label>
                </div>

                <div id="status"></div>
            </aside>

            <main id="main-content">
                <div id="menu"></div>

                <div id="exploration-screen" class="hidden">
                    <h2><i class="icon-map"></i> 미궁 탐험</h2>
                    
                    <div id="map-container">
                        <div id="map-grid"></div>
                        <div id="player-fixed">@</div>
                        
                        <div id="map-overlay-message" class="hidden"></div>
                    </div>

                    <div id="interaction-prompt" class="hidden">
                        <p id="interaction-desc">무언가 발견했습니다.</p>
                        <button id="interaction-btn">조사하기 (Space)</button>
                    </div>

                    <div id="map-controls">
                        <div class="d-pad">
                            <button id="btn-up" class="d-btn">▲</button>
                            <div class="d-row">
                                <button id="btn-left" class="d-btn">◀</button>
                                <button id="btn-down" class="d-btn">▼</button>
                                <button id="btn-right" class="d-btn">▶</button>
                            </div>
                        </div>
                        <div class="action-pad">
                            <button id="btn-wait" class="d-btn action">대기</button>
                            <button id="btn-inventory" class="d-btn action">인벤토리 (I)</button>
                        </div>
                    </div>

                    <div id="map-legend">
                        <span><b>◆</b> 몬스터</span>
                        <span><b>◎</b> 포탈</span>
                        <span><b>✸</b> 균열</span>
                        <span><b>✦</b> 이벤트/상호작용</span>
                        <span><b>✚</b> 아이템</span>
                    </div>
                </div>

                <div id="combat-screen" class="hidden">
                    <h2><i class="icon-combat"></i> 전투 중</h2>
                    <div id="combat-status"></div>
                    <div id="combat-menu"></div>
                </div>
            </main>

            <div id="log-panel">
                <h3><i class="icon-log"></i> 게임 로그</h3>
                <div id="log"></div>
            </div>

            <button id="toggle-status-panel" class="panel-toggle panel-toggle-status" type="button" aria-controls="status-panel" aria-expanded="true">상태 펼치기</button>
            <button id="toggle-log-panel" class="panel-toggle panel-toggle-log" type="button" aria-controls="log-panel" aria-expanded="true">로그 펼치기</button>
        </div>

        <div id="inventory-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2><i class="icon-inventory"></i> 인벤토리</h2>
                <div id="inventory-list"></div>
                <button id="back-to-menu" class="modal-close-btn">닫기</button>
            </div>
        </div>

        <div id="essences-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2><i class="icon-essence"></i> 정수 목록</h2>
                <div id="essences-list"></div>
                <button id="back-to-menu" class="modal-close-btn">닫기</button>
            </div>
        </div>

        <div id="spells-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2><i class="icon-spell"></i> 마법/스킬 목록</h2>
                <div id="spells-list"></div>
                <button id="back-to-menu" class="modal-close-btn">닫기</button>
            </div>
        </div>

         <div id="party-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2><i class="icon-party"></i> 파티원 정보</h2>
                <div id="party-list"></div>
                <button id="back-to-menu" class="modal-close-btn">닫기</button>
            </div>
        </div>

        <div id="quest-log-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2><i class="icon-quest"></i> 임무 일지</h2>
                <div id="quest-log-list"></div>
                <button id="back-to-menu" class="modal-close-btn">닫기</button>
            </div>
        </div>

        <div id="character-status-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2><i class="icon-user"></i> 캐릭터 상태</h2>
                <div id="character-status-content"></div>
                <button id="character-status-close" class="modal-close-btn">닫기</button>
            </div>
        </div>
        
        <div id="essence-choice-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2 id="essence-choice-title"><i class="icon-essence"></i> 새로운 정수 획득</h2>
                <p id="essence-choice-desc" style="font-style: italic; color: var(--color-text-secondary);"></p>
                <div id="essence-choice-list">
                    </div>
                <button id="essence-choice-close" class="modal-close-btn" style="background-color: var(--color-bg-light);">버리기 (선택 안 함)</button>
            </div>
        </div>

        <div id="rift-choice-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2 id="rift-choice-title"><i class="icon-combat"></i> 균열 발견!</h2>
                <p id="rift-choice-desc">불안정한 차원의 틈새를 발견했습니다.</p>
                <div id="rift-choice-buttons">
                    </div>
                </div>
        </div>

        <div id="portal-choice-screen" class="modal-overlay hidden">
            <div class="modal-content">
                <h2 id="portal-choice-title"><i class="icon-map"></i> [차원 비석] 발견</h2>
                <p id="portal-choice-desc">다음 층으로 이동할 수 있는 차원 비석을 발견했습니다.</p>
                <div id="portal-choice-buttons">
                </div>
            </div>
        </div>
    </div>

    <div id="audio-container">
        <audio id="bgm-title" src="music/adventure-begins-148729.mp3" loop preload="auto"></audio>
        <audio id="bgm-city" src="music/Tavern Loop One.mp3" loop preload="auto"></audio>
        <audio id="bgm-dungeon" src="music/bgm_dungeon_snowfall.mp3" loop preload="auto"></audio>
        <audio id="bgm-combat" src="music/Battle Of The Creek  By Alexander Nakarada  [Royalty Free] - Medieval Battle Music.mp3" loop preload="auto"></audio>
        <audio id="sfx-event" src="music/162. Get Fanfare - Key Item (Breath of the Wild Soundtrack).mp3" preload="auto"></audio>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>
